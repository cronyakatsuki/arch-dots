#!/bin/sh

disableCronJobs () {
    crontab -l | sed '2 s/./#&/' | crontab
}

enableCronJobs () {
    crontab -l | sed '2s/^.//' | crontab
}

if [ -f $HOME/.cache/gaming.lock ]; then
    start-program picom
    start-program transmission-daemon
    start-program syncthing
    enableCronJobs
    rm $HOME/.cache/gaming.lock
    quick-notify "Gaming Time" "OFF"
else
    kill-nicely picom
    kill-nicely syncthing
    transmission-remote --exit
    disableCronJobs
    touch $HOME/.cache/gaming.lock
    quick-notify "Gaming Time" "ON"
fi
